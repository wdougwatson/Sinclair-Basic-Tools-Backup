Auto 0

# Run-time Variables

Var x: Num = 7
Var y: Num = 16
Var a: Num = 85
Var i: Num = 0
Var paus: Num = 2600
Var exit: Num = 2
Var mode: Num = 3
Var pen: Num = 0
Var time: Num = 1
Var min: Num = -1
Var dir: Num = 4
Var m: NumArray(20, 20) = 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, -1, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 1, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, -1, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255
Var t: NumArray(20, 20) = 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
Var z: NumArray(3) = 0, 0, 0
Var f: NumFOR = 201, 200, 1, 4000, 2
Var g: NumFOR = 21, 20, 1, 420, 2
Var a$: Str = ""

# End Run-time Variables

   1 REM    Maze-bot
   2 REM (c)  Arjun Nair 2004
   3 REM  www.arjun.150m.com
   4 REM -------------------
   5 BORDER 0: PAPER 0: INK 7: CLS
   6 LET PAUS=2600: RANDOMIZE
   7 DIM m(20,20): DIM t(20,20): DIM z(3)
   8 GO SUB 100: GO SUB 140
  10 GO SUB 9000: REM  main menu
  12 CLS : INPUT "(N)ew or (C)urrent maze?:";a$: IF (a$<>"C" AND a$<>"N") THEN GO TO 12
  15 LET mode=1
  20 IF a$="N" THEN GO SUB 100: REM  init
  30 GO SUB 1000: REM game loop
  50 GO TO 10
 100 FOR f=1 TO 20: FOR g=1 TO 20: LET m(f,g)=255: NEXT g: NEXT f
 110 LET x=10: LET y=10
 120 LET exit=0: LET mode=1
 130 LET pen=0: LET time=0
 135 LET min=1
 140 REM * graphics data*
 170 RESTORE 171: FOR F=65368 TO 65399: READ A: POKE F,A: NEXT F
 171 DATA 189,66,153,165,165,153,66,189
 172 DATA 255,129,153,189,189,153,129,255
 173 DATA 0,127,127,127,127,127,127,127
 174 DATA 0,85,42,85,42,85,42,85
 180 RETURN
 200 REM *** set up board ***
 205 INK 7
 210 FOR f=2 TO 22
 220 PLOT 0,f*8-1
 230 DRAW 160,0
 240 PLOT (f-2)*8,16
 250 DRAW 0,159
 260 NEXT f
 270 PRINT AT 0,21; PAPER 2; INK 6;"  Maze Bot "
 300 PRINT AT 2,21; INK 6;"O:Left"
 310 PRINT AT 3,21; INK 6;"P:Right"
 320 PRINT AT 4,21; INK 6;"Q:Up"
 330 PRINT AT 5,21; INK 6;"S:Down"
 340 PRINT AT 7,21; INK 5;"SPACE to ";AT 8,21;"place exits"
 350 PRINT AT 10,21; INK 4;"T to toggle";AT 11,21;"pen up/down"
 360 PRINT AT 13,21; INK 3;"G to finish"
 365 PRINT AT 15,21; INK 1;"5 to quit"
 380 PRINT AT 17,21; PAPER 6; INK 2;"J:Load Maze"; PAPER 6; INK 2;AT 18,21;"K:Save Maze"
 410 FOR f=1 TO 20
 420 FOR g=1 TO 20
 430 IF (m(f,g)<255 AND m(f,g)>=0) THEN PRINT AT f-1,g-1; INK 0; PAPER 7;"\d": LET m(f,g)=0
 435 IF m(f,g)<0 THEN PRINT AT f-1,g-1; INK 2; PAPER 4;"\a"
 440 NEXT g: NEXT f
 999 RETURN
1000 REM *** game loop ***
1010 IF mode=1 THEN GO SUB 200: GO SUB 2000: REM draw mode
1020 IF mode=2 THEN GO SUB 3000: REM Bot mode
1030 IF mode=3 THEN RETURN
1040 GO TO 1000
2000 PRINT AT y,x; PAPER 2; INK 6; FLASH 1;"\c"; FLASH 0
2005 LET time=0
2010 LET a$=INKEY$
2020 IF a$="" THEN GO TO 2010
2025 LET i=m(y+1,x+1): IF (i=-1 AND (NOT pen)) THEN PRINT AT y,x; PAPER 4; INK 2;"\a": GO TO 2040
2026 REM IF (i=-1 AND pen) THEN LET exit=exit-(exit>0)
2030 LET m(y+1,x+1)=255*pen
2032 IF m(y+1,x+1)=0 THEN PRINT AT y,x; PAPER 7; INK 0;"\d"
2035 IF m(y+1,x+1)=255 THEN PRINT AT y,x; PAPER 7; INK 0;"\c"
2040 IF a$="o" THEN LET x=x-(x>0)
2050 IF a$="p" THEN LET x=x+(x<19)
2060 IF a$="q" THEN LET y=y-(y>0)
2070 IF a$="s" THEN LET y=y+(y<19)
2080 IF a$="t" THEN LET pen=1-pen
2085 IF a$="j" THEN PRINT AT 21,0; PAPER 4; INK 1;"Position tape and press any key": GO SUB 8550: GO SUB PAUS: LET mode=1: CLS : RETURN
2086 IF a$="k" THEN PRINT AT 21,0; FLASH 1;"          Please wait          "; FLASH 0: GO SUB 2700: PRINT AT 21,0;"                                "
2090 IF (a$=" " AND m(y+1,x+1)<>-1) THEN LET m(y+1,x+1)=-1: LET exit=exit+1
2095 IF a$="5" THEN LET mode=3: RETURN
2100 IF a$="g" THEN GO SUB 2500: IF mode=2 THEN RETURN
2102 IF (m(y+1,x+1)=-1 AND pen) THEN LET exit=exit-(exit>0)
2105 PRINT AT 21,0;"X:";x;" ";AT 21,10;"Y:";y;" ";AT 21,21; INK 2;"Exits:";exit;" "
2110 GO TO 2000
2500 IF ((m(y+1,x+1)=255) OR (m(y+1,x+1)=-1)) THEN PRINT AT 21,0; INK 3; FLASH 1;"Cursor not on valid maze square!"; FLASH 0: GO SUB PAUS: PRINT AT 21,0;"                                ": RETURN
2510 IF exit=0 THEN PRINT AT 21,0; INK 5; FLASH 1;"You must specify at least 1 exit": GO SUB PAUS: PRINT AT 21,0;"                                ": RETURN
2520 LET mode=2: RETURN
2600 REM ** Artificial pause*
2610 FOR f=1 TO 200: NEXT f
2620 RETURN
2700 REM *** save routine ***
2720 FOR f=1 TO 20: FOR g=1 TO 20
2725 LET t(f,g)=255
2730 IF m(f,g)<255 THEN LET t(f,g)=0
2740 IF m(f,g)=-1 THEN LET t(f,g)=-1
2755 NEXT g: NEXT f
2756 LET z(1)=y: LET z(2)=x: LET z(3)=exit
2760 SAVE "maze" DATA t()
2765 SAVE "mazedat" DATA z()
2770 RETURN
3000 FOR f=2 TO 18
3010 PRINT AT f,21;"           "
3020 NEXT f
3025 LET dir=1
3030 PRINT AT 2,21;"Solving..."
3031 PRINT AT 7,21; INK 6; INVERSE 1;"Legend:    "; INVERSE 0
3032 FOR f=1 TO 6: PRINT AT f+7,21; INK f;"\c"; INK 6;"= trace ";f: NEXT f: PRINT AT 14,21; INK 7;"\c"; INK 6;"= trace 7+"
3040 PRINT AT 21,0; INK 7;"X:";x;" ";AT 21,10;"Y:";y;" ";AT 21,21; INK 4;"Exits:";exit;"  "
3050 PRINT AT 17,21; INK 2;"Step:";time;
3055 LET time=time+1: LET m(y+1,x+1)=m(y+1,x+1)+1
3056 IF m(y+1,x+1)<8 THEN INK m(y+1,x+1): GO TO 3060
3057 INK 7
3060 PRINT AT y,x; PAPER 7;"\c"
3063 IF y=19 THEN GO TO 3067
3065 IF ((x=0) OR (x=20) OR (m(y+2,x+1)<=min)) THEN LET min=m(y+2,x+1): LET dir=4
3067 IF (y=0) THEN GO TO 3073
3070 IF (m(y,x+1)<=min) THEN LET dir=3: LET min=m(y,x+1)
3073 IF (x=19) THEN GO TO 3077
3075 IF (m(y+1,x+2)<=min) THEN LET dir=2: LET min=m(y+1,x+2)
3077 IF (x=0) THEN GO TO 3085
3080 IF (m(y+1,x)<=min) THEN LET dir=1: LET min=m(y+1,x)
3085 IF dir=1 THEN LET x=x-(x>0): IF m(y+1,x+1)=255 THEN LET dir=2
3090 IF dir=2 THEN LET x=x+(x<19): IF m(y+1,x+1)=255 THEN LET dir=1: LET x=x-1
3095 IF dir=3 THEN LET y=y-(y>0): IF m(y+1,x+1)=255 THEN LET dir=4
3100 IF dir=4 THEN LET y=y+(y<19): IF m(y+1,x+1)=255 THEN LET y=y-1
3105 LET min=m(y+1,x+1)
3110 IF m(y+1,x+1)=-1 THEN PRINT AT 2,21; FLASH 1; INK 7;"Exit found!"; FLASH 0: GO SUB 4000: PRINT AT 4,21; INK 5;"Total steps";AT 5,21;time: PRINT \{vn}#1;AT 0,0; INK 4; INVERSE 1;"   Press any key for main menu  "; INVERSE 0: PAUSE 0: LET mode=3: RETURN
3120 PRINT AT y,x; INK 7; PAPER 0;"\b"
3140 IF INKEY$ ="5" THEN LET mode=3: RETURN
3150 GO TO 3040
4000 FOR f=1 TO 200
4010 BORDER 6: BORDER 6: BORDER 6: BORDER 6
4020 BORDER 1: BORDER 1: BORDER 1: BORDER 1
4199 NEXT f
4200 BORDER 0: PAUSE 5: RETURN
8000 REM *** Instructions ***
8010 CLS : PRINT AT 0,0; PAPER 2; INK 6;"            Maze Bot            "
8020 PRINT : PRINT INK 6;"In 'Maze Bot' the computer will attempt to solve a maze defined by you. To begin with, you draw a maze using the Maze Editor, orif you have a previously saved  maze on tape, load it in. When  you have finished drawing the   maze, place the cursor on a mazesquare and press the G key. The computer will now enter 'Solve' mode and trace the path of the  maze.": PRINT : PRINT "Please note that the computer   does not solve for the shortest path, but it DOES find a way outeven in a complex maze!"
8030 PRINT : PRINT INK 5;"Remember, you can SAVE or LOAD amaze to/from a tape!"
8040 PAUSE 0
8050 RETURN
8500 REM *** Load maze***
8510 CLS
8520 PRINT AT 0,0; PAPER 2; INK 6;"            Maze Bot            "
8530 PRINT AT 10,0;"Position tape and press any key"
8540 PAUSE 0: INK 0: PRINT AT 21,0;
8550 LOAD "maze" DATA m(): PRINT AT 21,0;: LOAD "mazedat" DATA z()
8555 INK 7: LET y=z(1): LET x=z(2): LET exit=z(3): LET time=0: LET pen=0: LET min=1
8560 PRINT #1;AT 0,0;"          Maze Loaded!          "
8570 PAUSE 0: RETURN
8700 REM *** Credits ***
8710 CLS
8720 PRINT AT 0,0; PAPER 2; INK 6;"            Maze Bot            "
8730 PRINT : PRINT INK 6;"Many years ago I had coded a    similar program in C++. Now thatI've rekindled my interest in   Sinclair BASIC, I thought it    would be interesting to see if  I could do something similar in BASIC. The result is 'Maze Bot' that came about after many hoursof alternating between despair  and delight."
8740 PRINT : PRINT INK 5;"Once again BASin by Paul Dunn,  came very handy in coding this  program.Saved me many more hoursof frusteration! :)"
8750 PRINT : PRINT INK 4;"A big hello to specchums the    world over. Speccy rules!"
8760 PAUSE 0: RETURN
9000 REM *** main menu ***
9010 CLS
9020 PRINT AT 0,0; PAPER 2; INK 6;"\  \  \  \  \  \  \  \  \  \  \  \  Maze Bot\  \  \  \  \  \  \  \  \  \  \  \  "
9030 PRINT AT 5,10; INK 6;"1) Play game"
9040 PRINT AT 7,10; INK 5;"2) Instructions"
9050 PRINT AT 9,10; INK 4;"3) Load maze"
9060 PRINT AT 11,10; INK 3;"4) Credits"
9070 PRINT #1;AT 0,0; PAPER 1; INK 7;"       \* Arjun Nair 2004        "
9080 PRINT #0; PAPER 1; INK 6;"   website: www.arjun.150m.com  "
9090 LET a$=INKEY$
9100 IF a$="1" THEN RETURN
9110 IF a$="2" THEN GO SUB 8000: GO TO 9000
9120 IF a$="3" THEN GO SUB 8500: GO TO 9000
9130 IF a$="4" THEN GO SUB 8700: GO TO 9000
9140 IF a$="0" THEN PRINT AT 20,0; INK 2;"For my Indian specchums Puneet, Arun, Buggy and Vijay."
9150 GO TO 9090
